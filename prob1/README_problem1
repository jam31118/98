this is the source code of problem 1.
------------------------------------
#define _GNU_SOURCE

#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>
#include <wait.h>
#include <stdlib.h>

#include <sys/shm.h>
#include <sys/mman.h>
#include <fcntl.h>

int ch1task(int *sh_data_p, int N, int sleeptime) {
	usleep(sleeptime);
	int i;
//	printf("[PID == %d] I'm in ch1task \n",
//			(int) getpid());
	for(i=0;i<N;i++) (*sh_data_p)++; // = *sh_data_p +1;
	return 0;
}

int ch2task(int *sh_data_p, int N, int sleeptime) {
	usleep(sleeptime);
	int i;
//	printf("[PID == %d] I'm in ch2task \n",
//			(int) getpid());
	for(i=0; i<N; i++) (*sh_data_p)--; // = *sh_data_p -1;
	return 0;
}

int main(int argc, char *argv[]) {
	/* Parsing */
	if (argc <= 1) {printf("Enter sleeptimes\n");return 1;}
	int sleeptime1 = atoi(argv[1]);
	int sleeptime2 = atoi(argv[2]);

	/* Global configuration */
	int N = 10;
	int n = 2; // number of processes

	/* Shared memory information */
	const char *shmName = "/SHM";
	size_t SIZE = sizeof(int);
	int *sh_data_p;
	int shm_fd;

	shm_fd = shm_open(shmName, O_CREAT | O_RDWR, 0666);
	if (shm_fd == -1) {printf("Shared failed in CREATing\n"); return 1;}
	if (ftruncate(shm_fd,SIZE)) printf("[ERROR] Failed to ftruncate()\n");
	sh_data_p = (int *) mmap(0,SIZE,PROT_READ|PROT_WRITE,MAP_SHARED,shm_fd,0);
	if(sh_data_p == MAP_FAILED) {printf("Map Failed\n");return 1;}

	/* Shared Data initialization */
	*sh_data_p = 0;

	/* Creating Child Processes */
	pid_t ch1, ch2;

	ch1 = fork();
	if (ch1) {
		/* Parent Process */
	//	printf("I'm PARENT (PID == %d)\n",
	//			(int) getpid());
		//wait(NULL);
		ch2 = fork();
		if (ch2) {
			/* Parent Process in deeper but same */
		//	printf("[PID == %d] I'm PARENT, in inner shell \n",
		//			(int) getpid());
			while (n>0) {wait(NULL); --n;}
			printf("%d\n",*sh_data_p);
		} else {
			/* Child Process 02 */
		//	printf("[PID == %d] I'm CHILD \n",
		//			(int) getpid());
			ch2task(sh_data_p,N,sleeptime1);
		}

	} else {
		/* Child Process 01 */
	//	printf("[PID == %d] I'm CHILD\n",
	//			(int) getpid());
		ch1task(sh_data_p,N,sleeptime2);
	}
	return 0;
}
------------------------------------




To execute the same file for 1000 times, using .sh file with the following code.
------------------------------------
#!/bin/bash
PROGRAM=./problem1

for i in {0..100..10} 
	# Changing Delay time of process 1
	# relative to process 2
do
	echo "The delay is $i"
	for j in {1..1000} 
		# Repeat with same delay time setting
		# in order to find the race condition case
	do
		RESULT1=$($PROGRAM 0 $i)
		if [ $RESULT1 != 0 ]
		then
			echo $RESULT1
		fi
		#RESULT2=$($PROGRAM $i 0)
		#if [ $RESULT2 != 0 ]
		#then
		#	echo $RESULT2
		#fi
	done
done
------------------------------------




This is the result. Race condition is occurred.
(if there is no race condition, only "The delay is ~~" sentences are printed.)
------------------------------------
The delay is 0
10
The delay is 10
10
The delay is 20
10
10
-10
-10
10
The delay is 30
The delay is 40
10
-10
The delay is 50
-10
The delay is 60
The delay is 70
The delay is 80
-10
The delay is 90
The delay is 100
------------------------------------
